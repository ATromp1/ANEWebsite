<!DOCTYPE html>
<html lang="en">

{% extends "base.html" %}

<head>
    <meta charset="UTF-8">
    <title>Events Details</title>
</head>

<body>
    {% block content %}
    {% load static %}
    <!-- Alert message -->
    <div class="status-alert">
        <span>Late Time Saved</span>
    </div>
    <!-- Modal -->
    <div class="input-modal" id="event-view-template-modal">
        <div class="input-modal-container">
            <div class="input-modal-header">
                <span>Select Template To Load</span>
            </div>

            <select class="input-modal-dropdown" id="event-view-template-modal-dropdown">
            </select>
            <div class="input-modal-action-btns">
                <span class="input-modal-btn close-btn" id="template-modal-close">Cancel</span>
                <span class="input-modal-btn delete-btn" id="template-modal-delete">Delete Selected</span>
                <span class="input-modal-btn submit-btn" id="template-modal-load">Load</span>
            </div>
        </div>
    </div>

    <div class="event-view-container">
        <div class="event-view-boss-container">
            <div class="event-view-boss-list">
            </div>

            <div class="event-view-info-header">
                <div class="event-view-header-date">{{ event_date }}</div>
                <div class="event-view-header-bossname">No Boss Selected</div>
                {% if user.is_staff %}
                <div class="event-view-template-buttons">
                    <div class="event-view-save-template template-button">
                        Save as Template
                    </div>
                    <div class="event-view-load-template template-button">
                        Load a Template
                    </div>
                </div>
                {% else %}
                {% if user_is_late %}
                    <div class="event-header-right-div">
                        <p class="event-header-late-warning">You are marked late for this event</p>
                    </div>
                {% else %}
                <div class="invis-positioning-div">
                </div>
                {% endif %}
                {% endif %}
            </div>
            <div class="event-view-boss-info">
                <div class="boss-image-div">
                    <img src="{% static 'images/bossImages/Sepulcher/anduin.png' %}"  class="boss-image">
                </div>
                <div class="event-view-selected-roster">
                    <span class="event-view-selected-roster-totalcount">Total: </span>
                    <div class="event-view-selected-roster-tank" id="tank">
                        <div class="event-view-selected-roster-header">
                            <img src="{% static 'images/roleIcons/tank.png' %}" alt="Tank Icon" class="event-view-role-icon">
                            <span>Tank</span>
                            <span class="event-view-selected-roster-tankcount"></span>
                        </div>
                    </div>
                    <div class="event-view-selected-roster-healer" id="healer">
                        <div class="event-view-selected-roster-header">
                            <img src="{% static 'images/roleIcons/healer.png' %}" alt="Healer Icon" class="event-view-role-icon">
                            <span>Healer</span>
                            <span class="event-view-selected-roster-healercount"></span>
                        </div>
                    </div>
                    <div class="event-view-selected-roster-mdps" id="mdps">
                        <div class="event-view-selected-roster-header">
                            <img src="{% static 'images/roleIcons/mdps.png' %}" alt="Melee Icon" class="event-view-role-icon">
                            <span>Melee</span>
                            <span class="event-view-selected-roster-mdpscount"></span>
                        </div>
                    </div>
                    <div class="event-view-selected-roster-rdps" id="rdps">
                        <div class="event-view-selected-roster-header">
                            <img src="{% static 'images/roleIcons/rdps.png' %}" alt="Ranged Icon" class="event-view-role-icon">
                            <span>Ranged</span>
                            <span class="event-view-selected-roster-rdpscount"></span>
                        </div>
                    </div>
                </div>

                <div class="event-view-benched-roster">
                    <div class="event-view-benched-roster-header">
                        Bench
                    </div>
                    <table class="event-view-benched-roster-table">
                            <tr>
                                <th>No Boss Selected</th>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                            </tr>
                    </table>
                </div>
                {% if user.is_staff %}
                {% if late_users|length > 0 %}
                <div class="event-view-late-users">
                    <p>LATE USERS</p>
                    {% for late_user in late_users %}
                        {{ late_user.user }} -- {{ late_user.minutes_late }}
                    {% endfor %}
                </div>
                {% endif %}
                {% endif %}
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        let boss_list = {{bosses | safe}}
        let roster = {{roster_dict | safe}}
        let css_classes = {{css_classes | safe}}
        let static_url = "{% get_static_prefix %}"
        let boss_rosters = {{ selected_roster|safe }}
        let is_staff = {{ user.is_staff|yesno:"true,false" }}
    </script>
    <script src="{% static '/js/event_view.js' %}"></script>


    {% endblock %}

</body>


</html>