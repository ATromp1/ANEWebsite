<!DOCTYPE html>
<html lang="en">

{% extends "base.html" %}

<head>
    <meta charset="UTF-8">
    <title>Events Details</title>
</head>
<body>

{% block content %}
    <div class="event-view-container">
        <div class="event-view-signups">
            <h2>Sign Ups</h2>
            <a href="{% url 'opt-out' event.date %}" class="btn btn-danger">Sign Off</a><a href="{% url 'opt-in' event.date %}" class="btn btn-success">Sign In</a>
            <ul>
                {% for player in roster %}
                    <li>{{ player }}</li>
                {% endfor %}
            </ul>
        </div>
            <div id="vue-app">
                <div class="boss">
                    <ul class="event-view-boss-list">
                        <li v-for="boss in bosses">
                            <a>[[ boss.fields.boss_name ]]</a>
                        </li>
                    </ul>
                    <div class="roster">
                        <ul class="roster-per-boss">

                            <li v-for="(player, index) in roster">
                                <a @click="addToList(player.name,player.playable_class); removeFromRoster(index)">[[ player.name ]] -- [[ player.playable_class ]]</a>
                            </li>
                        </ul>
                    </div>
                    <div class="benched">
                        <ul class="bench-list-per-boss">
                            <li v-for="(player, index) in testlist">
                                <a @click="addToRoster(player); removeFromList(index)">[[ player.name ]]</a>
                            </li>
                        </ul>
                </div>
            </div>

            <div class="temp-invis-div">
            </div>
        </div>
    </div>

    <script type="text/javascript">
        var app = new Vue({
            el: "#vue-app",
            delimiters: ['[[',']]'],
            data: {
                bosses: {{itemtest|safe}},
                roster: {{roster_dict|safe}},
                testlist: [],
                index: [],
            },
            methods: {
                addToList(name,test) {
                    this.testlist.push({
                        name: name,
                        playable_class: test,
                    })
                },
                removeFromList(index) {
                    this.$delete(this.testlist, index)
                },
                removeFromRoster(index) {
                    this.index.push(index)
                    this.$delete(this.roster, index)
                },
                addToRoster(name,test) {
                    this.$set(this.roster, this.index[0], name, test)
                    this.$delete(this.index, 0)
                },
            }
        })
    </script>

{% endblock %}




</body>


</html>